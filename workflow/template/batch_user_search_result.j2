# Twitter 批量用户搜索结果

## 搜索汇总
- **查询时间**: {{ current_time }}
- **时间范围**: {{ batch_result.start_time }} 至 {{ batch_result.end_time }}
- **查询用户数**: {{ total_users }} 个
- **成功用户数**: {{ successful_count }} 个
- **失败用户数**: {{ failed_count }} 个
- **总推文数**: {{ batch_result.total_tweets }} 条

---

{%- if batch_result.successful_users %}
## 成功查询的用户

{%- for username in batch_result.successful_users %}
{%- set user_result = batch_result.user_results[username] %}

### 用户：@{{ username }}
- **推文数量**: {{ user_result.tweets|length }} 条
- **分页状态**: {% if user_result.has_next_page %}有更多推文{% else %}已显示所有推文{% endif %}

{%- if user_result.tweets %}
{%- for tweet in user_result.tweets %}

#### 推文 #{{ loop.index }}

{%- if tweet.retweeted_tweet %}
**类型**: 转发推文
**原作者**: {{ tweet.retweeted_tweet.author.name or '未知作者' }} (@{{ tweet.retweeted_tweet.author.username or 'unknown' }})
**转发者**: {{ tweet.author.name or '未知用户' }} (@{{ tweet.author.username or 'unknown' }})
**转发时间**: {{ tweet.created_at }}
**原推时间**: {{ tweet.retweeted_tweet.created_at or tweet.created_at }}
**推文ID**: {{ tweet.id }} (原推ID: {{ tweet.retweeted_tweet.id }})
**内容**: {{ tweet.retweeted_tweet.text }}
{%- elif tweet.quoted_tweet %}
**类型**: 引用推文
**作者**: {{ tweet.author.name or '未知作者' }} (@{{ tweet.author.username or 'unknown' }})
**时间**: {{ tweet.created_at }}
**推文ID**: {{ tweet.id }}
**内容**: {{ tweet.text }}

**引用的推文** (ID: {{ tweet.quoted_tweet.id }}):
> **作者**: {{ tweet.quoted_tweet.author.name or '未知作者' }} (@{{ tweet.quoted_tweet.author.username or 'unknown' }})
> **内容**: {{ tweet.quoted_tweet.text }}
{%- else %}
**类型**: 原创推文
**作者**: {{ tweet.author.name or '未知作者' }} (@{{ tweet.author.username or 'unknown' }})
**时间**: {{ tweet.created_at }}
**推文ID**: {{ tweet.id }}
**内容**: {{ tweet.text }}
{%- endif %}

{%- if tweet.is_reply and tweet.in_reply_to_username %}
**回复对象**: @{{ tweet.in_reply_to_username }} (回复推文ID: {{ tweet.in_reply_to_id }})
{%- endif %}

{%- if tweet.entities and (tweet.entities.hashtags or tweet.entities.user_mentions) %}
**相关标签**: 
{%- if tweet.entities.hashtags -%}
{%- for hashtag in tweet.entities.hashtags %}#{{ hashtag.text }}{% if not loop.last %} {% endif %}{% endfor -%}
{%- endif -%}
{%- if tweet.entities.hashtags and tweet.entities.user_mentions %} | {% endif -%}
{%- if tweet.entities.user_mentions -%}
提及: {% for mention in tweet.entities.user_mentions %}@{{ mention.screen_name }}{% if not loop.last %} {% endif %}{% endfor -%}
{%- endif %}
{%- endif %}

{%- if (tweet.extended_entities and tweet.extended_entities.get('media')) or tweet.card %}
**多媒体**: 包含多媒体内容（图片/视频/链接卡片等）
{%- endif %}

---
{%- endfor %}
{%- else %}
*该用户在指定时间范围内没有推文*
{%- endif %}
{%- endfor %}
{%- endif %}

{%- if batch_result.failed_users %}

## 查询失败的用户

{%- for username in batch_result.failed_users %}
- **@{{ username }}**: 查询失败（可能原因：用户不存在、账户受保护、API限制等）
{%- endfor %}

### 失败原因可能包括：
- 用户名不存在或拼写错误
- 用户账户已受保护或暂停
- API 速率限制
- 网络连接问题
- 用户在指定时间范围内没有推文

---
{%- endif %}

## 查询详情

**成功用户列表**: 
{%- if batch_result.successful_users -%}
{%- for username in batch_result.successful_users %}@{{ username }}{% if not loop.last %}, {% endif %}{% endfor -%}
{%- else %}
无
{%- endif %}

{%- if batch_result.failed_users %}
**失败用户列表**: 
{%- for username in batch_result.failed_users %}@{{ username }}{% if not loop.last %}, {% endif %}{% endfor -%}
{%- endif %}

**搜索参数**:
- 开始时间: `{{ batch_result.start_time }}`
- 结束时间: `{{ batch_result.end_time }}`
- 每用户最大推文数: 20条

---

*批量搜索完成时间: {{ current_time }}*